---
title: "Previous Capstone Projects"
format: 
  html:
    include-in-header:
      text: |
        <script>
          document.addEventListener('DOMContentLoaded', function () {
            let searchInput = document.getElementById('searchInput');
            let dateFilter = document.getElementById('dateFilter');
            let subjectFilter = document.getElementById('subjectFilter');
            let levelFilter = document.getElementById('levelFilter');
            let gridContainer = document.getElementById('projects-grid');

            function filterGrid() {
              const searchText = searchInput.value.toLowerCase();
              const selectedDate = dateFilter.value;
              const selectedSubject = subjectFilter.value;
              const selectedLevel = levelFilter.value;
              const cards = gridContainer.getElementsByClassName('project-card');

              for (let card of cards) {
                const text = card.textContent.toLowerCase();
                const date = card.getAttribute('data-date');
                const subject = card.getAttribute('data-subject');
                const level = card.getAttribute('data-level');

                const matchesSearch = text.includes(searchText);
                const matchesDate = selectedDate === 'all' || date === selectedDate;
                const matchesSubject = selectedSubject === 'all' || subject === selectedSubject;
                const matchesLevel = selectedLevel === 'all' || level === selectedLevel;

                card.style.display = matchesSearch && matchesDate && matchesSubject && matchesLevel ? 'flex' : 'none';
              }
            }

            if (searchInput) searchInput.addEventListener('input', filterGrid);
            if (dateFilter) dateFilter.addEventListener('change', filterGrid);
            if (subjectFilter) subjectFilter.addEventListener('change', filterGrid);
            if (levelFilter) levelFilter.addEventListener('change', filterGrid);
          });
        </script>
---

```{python}
#| echo: false
import yaml
import glob
from IPython.display import HTML

def load_projects():
    projects = []
    for file in glob.glob('../../data/previous-capstone/yml/*.yml'):
        with open(file, 'r') as f:
            data = yaml.safe_load(f)
            projects.append(data['project'])
    return sorted(projects, key=lambda x: (-int(x['year']), x['semester']))

projects = load_projects()

# Generate unique values for filters
dates = sorted(set(f"{p['semester']} {p['year']}" for p in projects))
subjects = sorted(set(p['subject'] for p in projects))
levels = sorted(set(p['level'] for p in projects))

html = """
<div style="margin-bottom: 20px;">
  <input type="text" id="searchInput" style = "width: 100%; padding: 8px; margin: 10px 0; border: 1px solid #dee2e6; border-radius: 4px;" placeholder="Search projects...">
  <div style="display: flex; gap: 10px; margin-top: 10px;">
    <select id="dateFilter" style="padding: 5px; border: 1px solid #ccc;">
      <option value="all">All Dates</option>
"""
for date in dates:
    html += f"<option value='{date}'>{date}</option>"

html += """
    </select>
    <select id="subjectFilter" style="padding: 5px; border: 1px solid #ccc;">
      <option value="all">All Subjects</option>
"""
for subject in subjects:
    html += f"<option value='{subject}'>{subject}</option>"

html += """
    </select>
    <select id="levelFilter" style="padding: 5px; border: 1px solid #ccc;">
      <option value="all">All Levels</option>
"""
for level in levels:
    html += f"<option value='{level}'>{level}</option>"

html += """
    </select>
  </div>
</div>
<div id="projects-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px;">
"""

for project in projects:
    html += f"""
    <div class="project-card" 
         data-date="{project['semester']} {project['year']}" 
         data-subject="{project['subject']}" 
         data-level="{project['level']}"
         style="width: 745px; display: flex; border: 1px solid #ccc; padding: 15px; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); align-items: flex-start; cursor: pointer;"
         onclick="this.querySelector('.more-info').style.display = this.querySelector('.more-info').style.display === 'block' ? 'none' : 'block';">
      <div style="display: flex; align-items: center; height: 150px;">
        <img src="../../data/previous-capstone/images/{project['semester']}{project['year']}-{"".join(project['authors'].split())}.png" 
             alt="Project Image" 
             style="width: 100px; height: 100px; object-fit: cover; border-radius: 5px; margin-right: 15px;">
      </div>
      <div>
        <h3 style="margin: 0 0 10px;">{project['name']}</h3>
        <p style="margin: 0 0 5px;"> {project['description']}</p>
        <div style="display: flex; justify-content: space-between; gap: 20px; align-items: center; margin-top: 20px;">
          <div style="display: flex; align-items: center;">
            <img src="../../data/images/calendar.svg" style="width: 20px; height: 20px; margin-right: 8px;">
            <p style="color: #003875; font-weight: bold; margin: 0;">{project['semester']} {project['year']}</p>
          </div>
          
          <div style="display: flex; align-items: center;">
            <img src="../../data/images/book.svg" style="width: 20px; height: 20px; margin-right: 8px;">
            <p style="color: #003875; font-weight: bold; margin: 0;">{project['subject']}</p>
          </div>
          
          <div style="display: flex; align-items: center;">
            <img src="../../data/images/mortarboard.svg" style="width: 20px; height: 20px; margin-right: 8px;">
            <p style="color: #003875; font-weight: bold; margin: 0;">{project['level']}</p>
          </div>
        </div>
        <div class="more-info" style="display: none; margin-top: 10px;">
          <ul style="list-style: none; padding: 0; margin: 0;">
            <p style="margin: 0 0 5px;"><strong>Author(s):</strong> {project['authors']}</p>
            <p style="margin: 0 0 5px;"><strong>Instructor:</strong> {project['instructor']}</p>
            <p style="margin: 0 0 5px;"><strong>Bibliography:</strong> {project['bib']}</p>
            <p style="margin: 0 0 5px;"><strong>Links:</strong></p>
            <div style="display: flex; gap: 10px; margin-top: 10px; justify-content: center; gap: 50px;">
            """
    if project.get('git_link', False):
        html += f'<a href = "{project["git_link"]}"> <img src="../../data/images/github.svg" alt="GitHub" style="width: 30px; height: 30px; cursor: pointer;"> </a>'
    if project.get('web_link', False):
        html += f'<a href = "{project["web_link"]}"> <img src="../../data/images/browser-chrome.svg" alt="Web" style="width: 30px; height: 30px; cursor: pointer;"> </a>'
    if project.get('poster_link', False):
        html += f'<a href = "{project["poster_link"]}"> <img src="../../data/images/postcard.svg" alt="Poster" style="width: 30px; height: 30px; cursor: pointer;"> </a>'
    if project.get('report_link', False):
        html += f'<a href = "{project["report_link"]}"> <img src="../../data/images/filetype-pdf.svg" alt="Report" style="width: 30px; height: 30px; cursor: pointer;"> </a>'
    html += f"""
            </div>
          </ul>
        </div>
      </div>
    </div>
    """

html += "</div>"

display(HTML(html))
```
